from miditok import TokenizerConfig, REMI
from pathlib import Path
from copy import deepcopy
import json

from miditok.classes import TokSequence

decoded_ids = [4,   386, 157, 187, 62,  94,  4,   386, 157, 55,  94,  159, 58,  94,  161, 62,  94,  163, 67,  94,  165, 63,
        94,  167, 60,  94,  169, 57,  94,  171, 60,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  60,  94,  181,
        58,  94,  55,  94,  185, 50,  94,  187, 53,  94,  4,   386, 157, 51,  94,  159, 62,  94,  161, 60,  94,  163,
        58,  94,  165, 57,  94,  167, 60,  94,  169, 63,  94,  171, 55,  94,  173, 54,  94,  175, 57,  94,  177, 50,
        94,  48,  94,  181, 46,  94,  55,  94,  185, 45,  94,  187, 57,  94,  4,   386, 157, 58,  94,  159, 50,  94,
        161, 43,  94,  163, 45,  94,  165, 46,  94,  167, 48,  94,  169, 50,  94,  171, 51,  94,  173, 53,  94,  175,
        46,  94,  177, 50,  94,  53,  94,  181, 58,  94,  60,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 55,
        94,  159, 51,  94,  161, 55,  94,  163, 58,  94,  165, 63,  94,  167, 55,  94,  169, 51,  94,  171, 48,  94,
        173, 45,  94,  175, 48,  94,  177, 53,  94,  63,  94,  181, 62,  94,  46,  94,  185, 51,  94,  187, 60,  94,
        4,   386, 157, 57,  94,  159, 53,  94,  161, 57,  94,  163, 60,  94,  165, 65,  94,  167, 56,  94,  169, 53,
        94,  171, 50,  94,  173, 47,  94,  175, 50,  94,  177, 55,  94,  62,  94,  181, 65,  94,  94,  185, 67,  94,
        187, 65,  94,  4,   386, 157, 63,  94,  159, 67,  94,  161, 63,  94,  163, 60,  94,  165, 55,  94,  167, 58,
        94,  169, 57,  94,  171, 55,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  48,  94,  181, 46,  94,  50,
        94,  185, 55,  94,  187, 58,  94,  4,   386, 157, 52,  94,  159, 62,  94,  161, 60,  94,  163, 46,  94,  165,
        45,  94,  167, 48,  94,  169, 51,  94,  171, 43,  94,  173, 94,  175, 50,  94,  177, 57,  94,  60,  94,  181,
        58,  94,  50,  94,  185, 43,  94,  187, 58,  94,  4,   386, 157, 57,  94,  159, 62,  94,  161, 57,  94,  163,
        54,  94,  165, 50,  94,  167, 54,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 62,  94,  177, 58,
        94,  55,  94,  181, 52,  94,  55,  94,  185, 60,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 60,  94,
        161, 62,  94,  163, 57,  94,  165, 58,  94,  167, 55,  94,  169, 64,  94,  171, 55,  94,  173, 49,  94,  175,
        57,  94,  177, 67,  94,  64,  94,  181, 65,  94,  57,  94,  185, 50,  94,  187, 65,  94,  4,   386, 157, 64,
        94,  159, 57,  94,  161, 61,  94,  163, 64,  94,  165, 69,  94,  167, 60,  94,  169, 54,  94,  171, 60,  94,
        173, 43,  94,  175, 50,  94,  177, 60,  94,  57,  94,  181, 58,  94,  62,  94,  185, 67,  94,  187, 69,  94,
        4,   386, 157, 94,  159, 61,  94,  161, 52,  94,  163, 61,  94,  165, 45,  94,  167, 94,  169, 61,  94,  171,
        69,  94,  173, 67,  94,  175, 65,  94,  177, 64,  94,  62,  94,  181, 57,  94,  62,  94,  185, 64,  94,  187,
        61,  94,  4,   386, 157, 62,  94,  159, 57,  94,  161, 54,  94,  163, 60,  94,  165, 58,  94,  167, 49,  94,
        169, 52,  94,  171, 55,  94,  173, 54,  94,  175, 50,  94,  177, 54,  94,  57,  94,  181, 62,  98,  187, 62,
        94,  4,   386, 157, 55,  94,  159, 58,  94,  161, 62,  94,  163, 67,  94,  165, 63,  94,  167, 60,  94,  169,
        57,  94,  171, 60,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  60,  94,  181, 58,  94,  55,  94,  185,
        50,  94,  187, 53,  94,  4,   386, 157, 51,  94,  159, 62,  94,  161, 60,  94,  163, 58,  94,  165, 57,  94,
        167, 60,  94,  169, 63,  94,  171, 55,  94,  173, 54,  94,  175, 57,  94,  177, 50,  94,  48,  94,  181, 46,
        94,  55,  94,  185, 45,  94,  187, 57,  94,  4,   386, 157, 58,  94,  159, 50,  94,  161, 43,  94,  163, 45,
        94,  165, 46,  94,  167, 48,  94,  169, 50,  94,  171, 51,  94,  173, 53,  94,  175, 46,  94,  177, 50,  94,
        53,  94,  181, 58,  94,  60,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 55,  94,  159, 51,  94,  161,
        55,  94,  163, 58,  94,  165, 63,  94,  167, 55,  94,  169, 51,  94,  171, 48,  94,  173, 45,  94,  175, 48,
        94,  177, 53,  94,  63,  94,  181, 62,  94,  46,  94,  185, 51,  94,  187, 60,  94,  4,   386, 157, 57,  94,
        159, 53,  94,  161, 57,  94,  163, 60,  94,  165, 65,  94,  167, 56,  94,  169, 53,  94,  171, 50,  94,  173,
        47,  94,  175, 50,  94,  177, 55,  94,  62,  94,  181, 65,  94,  94,  185, 67,  94,  187, 65,  94,  4,   386,
        157, 63,  94,  159, 67,  94,  161, 63,  94,  163, 60,  94,  165, 55,  94,  167, 58,  94,  169, 57,  94,  171,
        55,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  48,  94,  181, 46,  94,  50,  94,  185, 55,  94,  187,
        58,  94,  4,   386, 157, 52,  94,  159, 62,  94,  161, 60,  94,  163, 46,  94,  165, 45,  94,  167, 48,  94,
        169, 51,  94,  171, 43,  94,  173, 94,  175, 50,  94,  177, 57,  94,  60,  94,  181, 58,  94,  50,  94,  185,
        43,  94,  187, 58,  94,  4,   386, 157, 57,  94,  159, 62,  94,  161, 57,  94,  163, 54,  94,  165, 50,  94,
        167, 54,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 62,  94,  177, 58,  94,  55,  94,  181, 52,
        94,  55,  94,  185, 60,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 60,  94,  161, 62,  94,  163, 57,
        94,  165, 58,  94,  167, 55,  94,  169, 64,  94,  171, 55,  94,  173, 49,  94,  175, 57,  94,  177, 67,  94,
        64,  94,  181, 65,  94,  57,  94,  185, 50,  94,  187, 65,  94,  4,   386, 157, 64,  94,  159, 57,  94,  161,
        61,  94,  163, 64,  94,  165, 69,  94,  167, 60,  94,  169, 54,  94,  171, 60,  94,  173, 43,  94,  175, 50,
        94,  177, 60,  94,  57,  94,  181, 58,  94,  62,  94,  185, 67,  94,  187, 69,  94,  4,   386, 157, 94,  159,
        61,  94,  161, 52,  94,  163, 61,  94,  165, 45,  94,  167, 94,  169, 61,  94,  171, 69,  94,  173, 67,  94,
        175, 65,  94,  177, 64,  94,  62,  94,  181, 57,  94,  62,  94,  185, 64,  94,  187, 61,  94,  4,   386, 157,
        62,  94,  159, 57,  94,  161, 54,  94,  163, 60,  94,  165, 58,  94,  167, 49,  94,  169, 52,  94,  171, 55,
        94,  173, 54,  94,  175, 50,  94,  177, 54,  94,  57,  94,  181, 62,  98,  187, 57,  94,  4,   386, 157, 57,
        94,  159, 63,  94,  161, 60,  94,  163, 57,  94,  165, 54,  94,  167, 50,  94,  169, 57,  94,  171, 48,  94,
        173, 46,  94,  175, 50,  94,  177, 55,  94,  46,  94,  181, 45,  94,  43,  94,  185, 94,  187, 48,  94,  4,
        386, 157, 46,  94,  159, 43,  94,  161, 46,  94,  163, 50,  94,  165, 55,  94,  167, 51,  94,  169, 50,  94,
        171, 48,  94,  173, 47,  94,  175, 50,  94,  177, 53,  94,  56,  94,  181, 55,  94,  53,  94,  185, 62,  94,
        187, 53,  94,  4,   386, 157, 51,  94,  159, 55,  94,  161, 60,  94,  163, 63,  94,  165, 62,  94,  167, 65,
        94,  169, 59,  94,  171, 60,  94,  173, 55,  94,  175, 60,  94,  177, 59,  94,  62,  94,  181, 67,  94,  62,
        94,  185, 59,  94,  187, 53,  94,  4,   386, 157, 52,  94,  159, 55,  94,  161, 60,  94,  163, 64,  94,  165,
        67,  94,  167, 94,  169, 94,  171, 67,  94,  173, 94,  175, 65,  94,  177, 60,  94,  56,  94,  181, 53,  94,
        63,  94,  185, 62,  94,  187, 60,  94,  4,   386, 157, 59,  94,  159, 62,  94,  161, 65,  94,  163, 94,  165,
        67,  94,  167, 65,  94,  169, 59,  94,  171, 65,  94,  173, 63,  94,  175, 67,  94,  177, 63,  94,  60,  94,
        181, 55,  94,  63,  94,  185, 94,  187, 61,  94,  4,   386, 157, 60,  94,  159, 55,  94,  161, 56,  94,  163,
        60,  94,  165, 54,  94,  167, 55,  94,  169, 47,  94,  171, 48,  94,  173, 94,  175, 48,  94,  177, 55,  94,
        63,  94,  181, 62,  94,  60,  94,  185, 55,  94,  187, 59,  94,  4,   386, 157, 48,  94,  159, 51,  94,  161,
        55,  94,  163, 60,  94,  165, 55,  94,  167, 51,  94,  169, 48,  94,  171, 51,  94,  173, 45,  94,  175, 53,
        94,  177, 60,  94,  51,  94,  181, 50,  94,  65,  94,  185, 48,  94,  187, 63,  94,  4,   386, 157, 46,  94,
        159, 63,  94,  161, 62,  94,  163, 60,  94,  165, 58,  94,  167, 62,  94,  169, 66,  94,  171, 67,  94,  173,
        60,  94,  175, 57,  94,  177, 54,  94,  57,  94,  181, 46,  94,  62,  94,  185, 45,  94,  187, 60,  94,  4,
        386, 157, 43,  94,  159, 60,  94,  161, 58,  94,  163, 57,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,
        171, 63,  94,  173, 56,  94,  175, 53,  94,  177, 50,  94,  53,  94,  181, 46,  94,  50,  94,  185, 53,  94,
        187, 56,  94,  4,   386, 157, 62,  94,  159, 55,  94,  161, 47,  94,  163, 50,  94,  165, 55,  94,  167, 59,
        94,  169, 62,  94,  171, 65,  94,  173, 63,  94,  175, 60,  94,  177, 55,  94,  58,  94,  181, 56,  94,  60,
        94,  185, 63,  94,  187, 55,  94,  4,   386, 157, 54,  94,  159, 63,  94,  161, 62,  94,  163, 48,  94,  165,
        46,  94,  167, 67,  94,  169, 66,  94,  171, 67,  94,  173, 61,  94,  175, 62,  94,  177, 54,  94,  55,  94,
        181, 50,  94,  58,  94,  185, 57,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 43,  94,  161, 46,  94,
        163, 50,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,  171, 66,  94,  173, 67,  94,  175, 62,  94,  177,
        58,  94,  55,  94,  181, 43,  98,  187, 57,  94,  4,   386, 157, 57,  94,  159, 63,  94,  161, 60,  94,  163,
        57,  94,  165, 54,  94,  167, 50,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 50,  94,  177, 55,
        94,  46,  94,  181, 45,  94,  43,  94,  185, 94,  187, 48,  94,  4,   386, 157, 46,  94,  159, 43,  94,  161,
        46,  94,  163, 50,  94,  165, 55,  94,  167, 51,  94,  169, 50,  94,  171, 48,  94,  173, 47,  94,  175, 50,
        94,  177, 53,  94,  56,  94,  181, 55,  94,  53,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 51,  94,
        159, 55,  94,  161, 60,  94,  163, 63,  94,  165, 62,  94,  167, 65,  94,  169, 59,  94,  171, 60,  94,  173,
        55,  94,  175, 60,  94,  177, 59,  94,  62,  94,  181, 67,  94,  62,  94,  185, 59,  94,  187, 53,  94,  4,
        386, 157, 52,  94,  159, 55,  94,  161, 60,  94,  163, 64,  94,  165, 67,  94,  167, 94,  169, 94,  171, 67,
        94,  173, 94,  175, 65,  94,  177, 60,  94,  56,  94,  181, 53,  94,  63,  94,  185, 62,  94,  187, 60,  94,
        4,   386, 157, 59,  94,  159, 62,  94,  161, 65,  94,  163, 94,  165, 67,  94,  167, 65,  94,  169, 59,  94,
        171, 65,  94,  173, 63,  94,  175, 67,  94,  177, 63,  94,  60,  94,  181, 55,  94,  63,  94,  185, 94,  187,
        61,  94,  4,   386, 157, 60,  94,  159, 55,  94,  161, 56,  94,  163, 60,  94,  165, 54,  94,  167, 55,  94,
        169, 47,  94,  171, 48,  94,  173, 94,  175, 48,  94,  177, 55,  94,  63,  94,  181, 62,  94,  60,  94,  185,
        55,  94,  187, 59,  94,  4,   386, 157, 48,  94,  159, 51,  94,  161, 55,  94,  163, 60,  94,  165, 55,  94,
        167, 51,  94,  169, 48,  94,  171, 51,  94,  173, 45,  94,  175, 53,  94,  177, 60,  94,  51,  94,  181, 50,
        94,  65,  94,  185, 48,  94,  187, 63,  94,  4,   386, 157, 46,  94,  159, 63,  94,  161, 62,  94,  163, 60,
        94,  165, 58,  94,  167, 62,  94,  169, 66,  94,  171, 67,  94,  173, 60,  94,  175, 57,  94,  177, 54,  94,
        57,  94,  181, 46,  94,  62,  94,  185, 45,  94,  187, 60,  94,  4,   386, 157, 43,  94,  159, 60,  94,  161,
        58,  94,  163, 57,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,  171, 63,  94,  173, 56,  94,  175, 53,
        94,  177, 50,  94,  53,  94,  181, 46,  94,  50,  94,  185, 53,  94,  187, 56,  94,  4,   386, 157, 62,  94,
        159, 55,  94,  161, 47,  94,  163, 50,  94,  165, 55,  94,  167, 59,  94,  169, 62,  94,  171, 65,  94,  173,
        63,  94,  175, 60,  94,  177, 55,  94,  58,  94,  181, 56,  94,  60,  94,  185, 63,  94,  187, 55,  94,  4,
        386, 157, 54,  94,  159, 63,  94,  161, 62,  94,  163, 48,  94,  165, 46,  94,  167, 67,  94,  169, 66,  94,
        171, 67,  94,  173, 61,  94,  175, 62,  94,  177, 54,  94,  55,  94,  181, 50,  94,  58,  94,  185, 57,  94,
        187, 54,  94,  4,   386, 157, 55,  94,  159, 43,  94,  161, 46,  94,  163, 50,  94,  165, 55,  94,  167, 58,
        94,  169, 62,  94,  171, 66,  94,  173, 67,  94,  175, 62,  94,  177, 58,  94,  55,  94,  181, 43,  98]

ticks_bars = [0,    32,   64,   96,   128,  160,  192,  224,  256,  288,  320,  352,  384,
                                   416,  448,  480,  512,  544,  576,  608,  640,  672,  704,  736,  768,  800,
                                   832,  864,  896,  928,  960,  992,  1024, 1056, 1088, 1120, 1152, 1184, 1216,
                                   1248, 1280, 1312, 1344, 1376, 1408, 1440, 1472, 1504, 1536]

ticks_beats = [ 0,    8,    16,   24,   32,   40,   48,   56,   64,   72,   80,   88,   96,   104,  112,  120,  128,  136,
        144,  152,  160,  168,  176,  184,  192,  200,  208,  216,  224,  232,  240,  248,  256,  264,  272,  280,
        288,  296,  304,  312,  320,  328,  336,  344,  352,  360,  368,  376,  384,  392,  400,  408,  416,  424,
        432,  440,  448,  456,  464,  472,  480,  488,  496,  504,  512,  520,  528,  536,  544,  552,  560,  568,
        576,  584,  592,  600,  608,  616,  624,  632,  640,  648,  656,  664,  672,  680,  688,  696,  704,  712,
        720,  728,  736,  744,  752,  760,  768,  776,  784,  792,  800,  808,  816,  824,  832,  840,  848,  856,
        864,  872,  880,  888,  896,  904,  912,  920,  928,  936,  944,  952,  960,  968,  976,  984,  992,  1000,
        1008, 1016, 1024, 1032, 1040, 1048, 1056, 1064, 1072, 1080, 1088, 1096, 1104, 1112, 1120, 1128, 1136, 1144,
        1152, 1160, 1168, 1176, 1184, 1192, 1200, 1208, 1216, 1224, 1232, 1240, 1248, 1256, 1264, 1272, 1280, 1288,
        1296, 1304, 1312, 1320, 1328, 1336, 1344, 1352, 1360, 1368, 1376, 1384, 1392, 1400, 1408, 1416, 1424, 1432,
        1440, 1448, 1456, 1464, 1472, 1480, 1488, 1496, 1504, 1512, 1520, 1528, 1536, 1544, 1552]

def main():
    tokenizer = REMI(params=Path("experiments/example_tokenizer.json"))
    print(len(tokenizer._vocab_base_id_to_byte))

    tokseq = TokSequence()
    tokseq.ids = decoded_ids
    tokseq._ticks_bars = ticks_bars
    tokseq._ticks_beats = ticks_beats
    tokseq.are_ids_encoded = False

    for id in tokseq.ids:
        print(id)


if __name__ == "__main__":
    main()

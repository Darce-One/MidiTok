from miditok import TokenizerConfig, REMI
from pathlib import Path
from copy import deepcopy
import json

from miditok.classes import TokSequence

decoded_ids = [4,   386, 157, 187, 62,  94,  4,   386, 157, 55,  94,  159, 58,  94,  161, 62,  94,  163, 67,  94,  165, 63,
        94,  167, 60,  94,  169, 57,  94,  171, 60,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  60,  94,  181,
        58,  94,  55,  94,  185, 50,  94,  187, 53,  94,  4,   386, 157, 51,  94,  159, 62,  94,  161, 60,  94,  163,
        58,  94,  165, 57,  94,  167, 60,  94,  169, 63,  94,  171, 55,  94,  173, 54,  94,  175, 57,  94,  177, 50,
        94,  48,  94,  181, 46,  94,  55,  94,  185, 45,  94,  187, 57,  94,  4,   386, 157, 58,  94,  159, 50,  94,
        161, 43,  94,  163, 45,  94,  165, 46,  94,  167, 48,  94,  169, 50,  94,  171, 51,  94,  173, 53,  94,  175,
        46,  94,  177, 50,  94,  53,  94,  181, 58,  94,  60,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 55,
        94,  159, 51,  94,  161, 55,  94,  163, 58,  94,  165, 63,  94,  167, 55,  94,  169, 51,  94,  171, 48,  94,
        173, 45,  94,  175, 48,  94,  177, 53,  94,  63,  94,  181, 62,  94,  46,  94,  185, 51,  94,  187, 60,  94,
        4,   386, 157, 57,  94,  159, 53,  94,  161, 57,  94,  163, 60,  94,  165, 65,  94,  167, 56,  94,  169, 53,
        94,  171, 50,  94,  173, 47,  94,  175, 50,  94,  177, 55,  94,  62,  94,  181, 65,  94,  94,  185, 67,  94,
        187, 65,  94,  4,   386, 157, 63,  94,  159, 67,  94,  161, 63,  94,  163, 60,  94,  165, 55,  94,  167, 58,
        94,  169, 57,  94,  171, 55,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  48,  94,  181, 46,  94,  50,
        94,  185, 55,  94,  187, 58,  94,  4,   386, 157, 52,  94,  159, 62,  94,  161, 60,  94,  163, 46,  94,  165,
        45,  94,  167, 48,  94,  169, 51,  94,  171, 43,  94,  173, 94,  175, 50,  94,  177, 57,  94,  60,  94,  181,
        58,  94,  50,  94,  185, 43,  94,  187, 58,  94,  4,   386, 157, 57,  94,  159, 62,  94,  161, 57,  94,  163,
        54,  94,  165, 50,  94,  167, 54,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 62,  94,  177, 58,
        94,  55,  94,  181, 52,  94,  55,  94,  185, 60,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 60,  94,
        161, 62,  94,  163, 57,  94,  165, 58,  94,  167, 55,  94,  169, 64,  94,  171, 55,  94,  173, 49,  94,  175,
        57,  94,  177, 67,  94,  64,  94,  181, 65,  94,  57,  94,  185, 50,  94,  187, 65,  94,  4,   386, 157, 64,
        94,  159, 57,  94,  161, 61,  94,  163, 64,  94,  165, 69,  94,  167, 60,  94,  169, 54,  94,  171, 60,  94,
        173, 43,  94,  175, 50,  94,  177, 60,  94,  57,  94,  181, 58,  94,  62,  94,  185, 67,  94,  187, 69,  94,
        4,   386, 157, 94,  159, 61,  94,  161, 52,  94,  163, 61,  94,  165, 45,  94,  167, 94,  169, 61,  94,  171,
        69,  94,  173, 67,  94,  175, 65,  94,  177, 64,  94,  62,  94,  181, 57,  94,  62,  94,  185, 64,  94,  187,
        61,  94,  4,   386, 157, 62,  94,  159, 57,  94,  161, 54,  94,  163, 60,  94,  165, 58,  94,  167, 49,  94,
        169, 52,  94,  171, 55,  94,  173, 54,  94,  175, 50,  94,  177, 54,  94,  57,  94,  181, 62,  98,  187, 62,
        94,  4,   386, 157, 55,  94,  159, 58,  94,  161, 62,  94,  163, 67,  94,  165, 63,  94,  167, 60,  94,  169,
        57,  94,  171, 60,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  60,  94,  181, 58,  94,  55,  94,  185,
        50,  94,  187, 53,  94,  4,   386, 157, 51,  94,  159, 62,  94,  161, 60,  94,  163, 58,  94,  165, 57,  94,
        167, 60,  94,  169, 63,  94,  171, 55,  94,  173, 54,  94,  175, 57,  94,  177, 50,  94,  48,  94,  181, 46,
        94,  55,  94,  185, 45,  94,  187, 57,  94,  4,   386, 157, 58,  94,  159, 50,  94,  161, 43,  94,  163, 45,
        94,  165, 46,  94,  167, 48,  94,  169, 50,  94,  171, 51,  94,  173, 53,  94,  175, 46,  94,  177, 50,  94,
        53,  94,  181, 58,  94,  60,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 55,  94,  159, 51,  94,  161,
        55,  94,  163, 58,  94,  165, 63,  94,  167, 55,  94,  169, 51,  94,  171, 48,  94,  173, 45,  94,  175, 48,
        94,  177, 53,  94,  63,  94,  181, 62,  94,  46,  94,  185, 51,  94,  187, 60,  94,  4,   386, 157, 57,  94,
        159, 53,  94,  161, 57,  94,  163, 60,  94,  165, 65,  94,  167, 56,  94,  169, 53,  94,  171, 50,  94,  173,
        47,  94,  175, 50,  94,  177, 55,  94,  62,  94,  181, 65,  94,  94,  185, 67,  94,  187, 65,  94,  4,   386,
        157, 63,  94,  159, 67,  94,  161, 63,  94,  163, 60,  94,  165, 55,  94,  167, 58,  94,  169, 57,  94,  171,
        55,  94,  173, 54,  94,  175, 63,  94,  177, 62,  94,  48,  94,  181, 46,  94,  50,  94,  185, 55,  94,  187,
        58,  94,  4,   386, 157, 52,  94,  159, 62,  94,  161, 60,  94,  163, 46,  94,  165, 45,  94,  167, 48,  94,
        169, 51,  94,  171, 43,  94,  173, 94,  175, 50,  94,  177, 57,  94,  60,  94,  181, 58,  94,  50,  94,  185,
        43,  94,  187, 58,  94,  4,   386, 157, 57,  94,  159, 62,  94,  161, 57,  94,  163, 54,  94,  165, 50,  94,
        167, 54,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 62,  94,  177, 58,  94,  55,  94,  181, 52,
        94,  55,  94,  185, 60,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 60,  94,  161, 62,  94,  163, 57,
        94,  165, 58,  94,  167, 55,  94,  169, 64,  94,  171, 55,  94,  173, 49,  94,  175, 57,  94,  177, 67,  94,
        64,  94,  181, 65,  94,  57,  94,  185, 50,  94,  187, 65,  94,  4,   386, 157, 64,  94,  159, 57,  94,  161,
        61,  94,  163, 64,  94,  165, 69,  94,  167, 60,  94,  169, 54,  94,  171, 60,  94,  173, 43,  94,  175, 50,
        94,  177, 60,  94,  57,  94,  181, 58,  94,  62,  94,  185, 67,  94,  187, 69,  94,  4,   386, 157, 94,  159,
        61,  94,  161, 52,  94,  163, 61,  94,  165, 45,  94,  167, 94,  169, 61,  94,  171, 69,  94,  173, 67,  94,
        175, 65,  94,  177, 64,  94,  62,  94,  181, 57,  94,  62,  94,  185, 64,  94,  187, 61,  94,  4,   386, 157,
        62,  94,  159, 57,  94,  161, 54,  94,  163, 60,  94,  165, 58,  94,  167, 49,  94,  169, 52,  94,  171, 55,
        94,  173, 54,  94,  175, 50,  94,  177, 54,  94,  57,  94,  181, 62,  98,  187, 57,  94,  4,   386, 157, 57,
        94,  159, 63,  94,  161, 60,  94,  163, 57,  94,  165, 54,  94,  167, 50,  94,  169, 57,  94,  171, 48,  94,
        173, 46,  94,  175, 50,  94,  177, 55,  94,  46,  94,  181, 45,  94,  43,  94,  185, 94,  187, 48,  94,  4,
        386, 157, 46,  94,  159, 43,  94,  161, 46,  94,  163, 50,  94,  165, 55,  94,  167, 51,  94,  169, 50,  94,
        171, 48,  94,  173, 47,  94,  175, 50,  94,  177, 53,  94,  56,  94,  181, 55,  94,  53,  94,  185, 62,  94,
        187, 53,  94,  4,   386, 157, 51,  94,  159, 55,  94,  161, 60,  94,  163, 63,  94,  165, 62,  94,  167, 65,
        94,  169, 59,  94,  171, 60,  94,  173, 55,  94,  175, 60,  94,  177, 59,  94,  62,  94,  181, 67,  94,  62,
        94,  185, 59,  94,  187, 53,  94,  4,   386, 157, 52,  94,  159, 55,  94,  161, 60,  94,  163, 64,  94,  165,
        67,  94,  167, 94,  169, 94,  171, 67,  94,  173, 94,  175, 65,  94,  177, 60,  94,  56,  94,  181, 53,  94,
        63,  94,  185, 62,  94,  187, 60,  94,  4,   386, 157, 59,  94,  159, 62,  94,  161, 65,  94,  163, 94,  165,
        67,  94,  167, 65,  94,  169, 59,  94,  171, 65,  94,  173, 63,  94,  175, 67,  94,  177, 63,  94,  60,  94,
        181, 55,  94,  63,  94,  185, 94,  187, 61,  94,  4,   386, 157, 60,  94,  159, 55,  94,  161, 56,  94,  163,
        60,  94,  165, 54,  94,  167, 55,  94,  169, 47,  94,  171, 48,  94,  173, 94,  175, 48,  94,  177, 55,  94,
        63,  94,  181, 62,  94,  60,  94,  185, 55,  94,  187, 59,  94,  4,   386, 157, 48,  94,  159, 51,  94,  161,
        55,  94,  163, 60,  94,  165, 55,  94,  167, 51,  94,  169, 48,  94,  171, 51,  94,  173, 45,  94,  175, 53,
        94,  177, 60,  94,  51,  94,  181, 50,  94,  65,  94,  185, 48,  94,  187, 63,  94,  4,   386, 157, 46,  94,
        159, 63,  94,  161, 62,  94,  163, 60,  94,  165, 58,  94,  167, 62,  94,  169, 66,  94,  171, 67,  94,  173,
        60,  94,  175, 57,  94,  177, 54,  94,  57,  94,  181, 46,  94,  62,  94,  185, 45,  94,  187, 60,  94,  4,
        386, 157, 43,  94,  159, 60,  94,  161, 58,  94,  163, 57,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,
        171, 63,  94,  173, 56,  94,  175, 53,  94,  177, 50,  94,  53,  94,  181, 46,  94,  50,  94,  185, 53,  94,
        187, 56,  94,  4,   386, 157, 62,  94,  159, 55,  94,  161, 47,  94,  163, 50,  94,  165, 55,  94,  167, 59,
        94,  169, 62,  94,  171, 65,  94,  173, 63,  94,  175, 60,  94,  177, 55,  94,  58,  94,  181, 56,  94,  60,
        94,  185, 63,  94,  187, 55,  94,  4,   386, 157, 54,  94,  159, 63,  94,  161, 62,  94,  163, 48,  94,  165,
        46,  94,  167, 67,  94,  169, 66,  94,  171, 67,  94,  173, 61,  94,  175, 62,  94,  177, 54,  94,  55,  94,
        181, 50,  94,  58,  94,  185, 57,  94,  187, 54,  94,  4,   386, 157, 55,  94,  159, 43,  94,  161, 46,  94,
        163, 50,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,  171, 66,  94,  173, 67,  94,  175, 62,  94,  177,
        58,  94,  55,  94,  181, 43,  98,  187, 57,  94,  4,   386, 157, 57,  94,  159, 63,  94,  161, 60,  94,  163,
        57,  94,  165, 54,  94,  167, 50,  94,  169, 57,  94,  171, 48,  94,  173, 46,  94,  175, 50,  94,  177, 55,
        94,  46,  94,  181, 45,  94,  43,  94,  185, 94,  187, 48,  94,  4,   386, 157, 46,  94,  159, 43,  94,  161,
        46,  94,  163, 50,  94,  165, 55,  94,  167, 51,  94,  169, 50,  94,  171, 48,  94,  173, 47,  94,  175, 50,
        94,  177, 53,  94,  56,  94,  181, 55,  94,  53,  94,  185, 62,  94,  187, 53,  94,  4,   386, 157, 51,  94,
        159, 55,  94,  161, 60,  94,  163, 63,  94,  165, 62,  94,  167, 65,  94,  169, 59,  94,  171, 60,  94,  173,
        55,  94,  175, 60,  94,  177, 59,  94,  62,  94,  181, 67,  94,  62,  94,  185, 59,  94,  187, 53,  94,  4,
        386, 157, 52,  94,  159, 55,  94,  161, 60,  94,  163, 64,  94,  165, 67,  94,  167, 94,  169, 94,  171, 67,
        94,  173, 94,  175, 65,  94,  177, 60,  94,  56,  94,  181, 53,  94,  63,  94,  185, 62,  94,  187, 60,  94,
        4,   386, 157, 59,  94,  159, 62,  94,  161, 65,  94,  163, 94,  165, 67,  94,  167, 65,  94,  169, 59,  94,
        171, 65,  94,  173, 63,  94,  175, 67,  94,  177, 63,  94,  60,  94,  181, 55,  94,  63,  94,  185, 94,  187,
        61,  94,  4,   386, 157, 60,  94,  159, 55,  94,  161, 56,  94,  163, 60,  94,  165, 54,  94,  167, 55,  94,
        169, 47,  94,  171, 48,  94,  173, 94,  175, 48,  94,  177, 55,  94,  63,  94,  181, 62,  94,  60,  94,  185,
        55,  94,  187, 59,  94,  4,   386, 157, 48,  94,  159, 51,  94,  161, 55,  94,  163, 60,  94,  165, 55,  94,
        167, 51,  94,  169, 48,  94,  171, 51,  94,  173, 45,  94,  175, 53,  94,  177, 60,  94,  51,  94,  181, 50,
        94,  65,  94,  185, 48,  94,  187, 63,  94,  4,   386, 157, 46,  94,  159, 63,  94,  161, 62,  94,  163, 60,
        94,  165, 58,  94,  167, 62,  94,  169, 66,  94,  171, 67,  94,  173, 60,  94,  175, 57,  94,  177, 54,  94,
        57,  94,  181, 46,  94,  62,  94,  185, 45,  94,  187, 60,  94,  4,   386, 157, 43,  94,  159, 60,  94,  161,
        58,  94,  163, 57,  94,  165, 55,  94,  167, 58,  94,  169, 62,  94,  171, 63,  94,  173, 56,  94,  175, 53,
        94,  177, 50,  94,  53,  94,  181, 46,  94,  50,  94,  185, 53,  94,  187, 56,  94,  4,   386, 157, 62,  94,
        159, 55,  94,  161, 47,  94,  163, 50,  94,  165, 55,  94,  167, 59,  94,  169, 62,  94,  171, 65,  94,  173,
        63,  94,  175, 60,  94,  177, 55,  94,  58,  94,  181, 56,  94,  60,  94,  185, 63,  94,  187, 55,  94,  4,
        386, 157, 54,  94,  159, 63,  94,  161, 62,  94,  163, 48,  94,  165, 46,  94,  167, 67,  94,  169, 66,  94,
        171, 67,  94,  173, 61,  94,  175, 62,  94,  177, 54,  94,  55,  94,  181, 50,  94,  58,  94,  185, 57,  94,
        187, 54,  94,  4,   386, 157, 55,  94,  159, 43,  94,  161, 46,  94,  163, 50,  94,  165, 55,  94,  167, 58,
        94,  169, 62,  94,  171, 66,  94,  173, 67,  94,  175, 62,  94,  177, 58,  94,  55,  94,  181, 43,  98]

ticks_bars = [0,    32,   64,   96,   128,  160,  192,  224,  256,  288,  320,  352,  384,
                                   416,  448,  480,  512,  544,  576,  608,  640,  672,  704,  736,  768,  800,
                                   832,  864,  896,  928,  960,  992,  1024, 1056, 1088, 1120, 1152, 1184, 1216,
                                   1248, 1280, 1312, 1344, 1376, 1408, 1440, 1472, 1504, 1536]

ticks_beats = [ 0,    8,    16,   24,   32,   40,   48,   56,   64,   72,   80,   88,   96,   104,  112,  120,  128,  136,
        144,  152,  160,  168,  176,  184,  192,  200,  208,  216,  224,  232,  240,  248,  256,  264,  272,  280,
        288,  296,  304,  312,  320,  328,  336,  344,  352,  360,  368,  376,  384,  392,  400,  408,  416,  424,
        432,  440,  448,  456,  464,  472,  480,  488,  496,  504,  512,  520,  528,  536,  544,  552,  560,  568,
        576,  584,  592,  600,  608,  616,  624,  632,  640,  648,  656,  664,  672,  680,  688,  696,  704,  712,
        720,  728,  736,  744,  752,  760,  768,  776,  784,  792,  800,  808,  816,  824,  832,  840,  848,  856,
        864,  872,  880,  888,  896,  904,  912,  920,  928,  936,  944,  952,  960,  968,  976,  984,  992,  1000,
        1008, 1016, 1024, 1032, 1040, 1048, 1056, 1064, 1072, 1080, 1088, 1096, 1104, 1112, 1120, 1128, 1136, 1144,
        1152, 1160, 1168, 1176, 1184, 1192, 1200, 1208, 1216, 1224, 1232, 1240, 1248, 1256, 1264, 1272, 1280, 1288,
        1296, 1304, 1312, 1320, 1328, 1336, 1344, 1352, 1360, 1368, 1376, 1384, 1392, 1400, 1408, 1416, 1424, 1432,
        1440, 1448, 1456, 1464, 1472, 1480, 1488, 1496, 1504, 1512, 1520, 1528, 1536, 1544, 1552]

encodedIds = [85,  67,  402, 85,  111, 51,  296, 32,  153, 37,  40,  810, 182, 60,  156, 61,  182, 62,  24,  40,  63,  286,
        64,  402, 182, 65,  114, 111, 66,  225, 67,  120, 85,  145, 51,  402, 53,  30,  191, 156, 59,  182, 60,  286,
        258, 62,  24,  40,  63,  156, 64,  225, 392, 65,  310, 111, 66,  15,  40,  67,  156, 85,  114, 528, 53,  13,
        153, 15,  40,  57,  310, 59,  392, 60,  225, 538, 62,  120, 63,  310, 64,  225, 120, 65,  114, 182, 66,  402,
        67,  120, 85,  111, 51,  145, 325, 164, 439, 111, 380, 392, 62,  15,  40,  63,  392, 64,  120, 286, 65,  402,
        310, 66,  145, 67,  182, 549, 120, 53,  27,  153, 182, 57,  35,  40,  59,  173, 60,  120, 61,  225, 62,  17,
        40,  63,  225, 64,  111, 402, 65,  35,  40,  40,  66,  37,  40,  67,  35,  40,  260, 40,  51,  37,  40,  53,
        793, 182, 57,  266, 114, 60,  156, 258, 62,  24,  40,  63,  286, 64,  402, 392, 65,  310, 225, 66,  111, 545,
        85,  22,  40,  51,  402, 53,  30,  153, 310, 57,  15,  40,  59,  392, 380, 13,  40,  62,  40,  63,  225, 64,
        156, 182, 65,  114, 225, 66,  13,  40,  545, 549, 402, 53,  27,  153, 24,  40,  57,  225, 59,  24,  40,  60,
        156, 61,  392, 62,  310, 63,  402, 64,  114, 111, 65,  22,  40,  111, 66,  182, 67,  24,  40,  85,  111, 51,
        182, 53,  32,  153, 156, 57,  114, 59,  111, 60,  34,  40,  258, 62,  19,  40,  63,  156, 64,  37,  40,  34,
        40,  65,  35,  40,  156, 66,  225, 67,  35,  40,  85,  34,  40,  51,  156, 53,  511, 34,  40,  57,  38,  40,
        59,  182, 60,  24,  40,  61,  182, 62,  13,  40,  63,  225, 64,  182, 156, 65,  114, 402, 66,  37,  40,  67,
        38,  40,  85,  40,  51,  31,  40,  53,  22,  153, 31,  40,  57,  15,  40,  59,  40,  60,  31,  40,  61,  38,
        40,  62,  37,  40,  63,  35,  40,  64,  34,  40,  402, 65,  156, 402, 66,  34,  40,  67,  31,  40,  85,  402,
        51,  156, 53,  24,  153, 182, 57,  114, 59,  19,  40,  60,  22,  40,  258, 62,  24,  40,  63,  225, 64,  24,
        40,  156, 65,  514, 67,  402, 85,  111, 51,  296, 32,  153, 37,  40,  810, 182, 60,  156, 61,  182, 62,  24,
        40,  63,  286, 64,  402, 182, 65,  114, 111, 66,  225, 67,  120, 85,  145, 51,  402, 53,  30,  191, 156, 59,
        182, 60,  286, 258, 62,  24,  40,  63,  156, 64,  225, 392, 65,  310, 111, 66,  15,  40,  67,  156, 85,  114,
        528, 53,  13,  153, 15,  40,  57,  310, 59,  392, 60,  225, 538, 62,  120, 63,  310, 64,  225, 120, 65,  114,
        182, 66,  402, 67,  120, 85,  111, 51,  145, 325, 164, 439, 111, 380, 392, 62,  15,  40,  63,  392, 64,  120,
        286, 65,  402, 310, 66,  145, 67,  182, 549, 120, 53,  27,  153, 182, 57,  35,  40,  59,  173, 60,  120, 61,
        225, 62,  17,  40,  63,  225, 64,  111, 402, 65,  35,  40,  40,  66,  37,  40,  67,  35,  40,  260, 40,  51,
        37,  40,  53,  793, 182, 57,  266, 114, 60,  156, 258, 62,  24,  40,  63,  286, 64,  402, 392, 65,  310, 225,
        66,  111, 545, 85,  22,  40,  51,  402, 53,  30,  153, 310, 57,  15,  40,  59,  392, 380, 13,  40,  62,  40,
        63,  225, 64,  156, 182, 65,  114, 225, 66,  13,  40,  545, 549, 402, 53,  27,  153, 24,  40,  57,  225, 59,
        24,  40,  60,  156, 61,  392, 62,  310, 63,  402, 64,  114, 111, 65,  22,  40,  111, 66,  182, 67,  24,  40,
        85,  111, 51,  182, 53,  32,  153, 156, 57,  114, 59,  111, 60,  34,  40,  258, 62,  19,  40,  63,  156, 64,
        37,  40,  34,  40,  65,  35,  40,  156, 66,  225, 67,  35,  40,  85,  34,  40,  51,  156, 53,  511, 34,  40,
        57,  38,  40,  59,  182, 60,  24,  40,  61,  182, 62,  13,  40,  63,  225, 64,  182, 156, 65,  114, 402, 66,
        37,  40,  67,  38,  40,  85,  40,  51,  31,  40,  53,  22,  153, 31,  40,  57,  15,  40,  59,  40,  60,  31,
        40,  61,  38,  40,  62,  37,  40,  63,  35,  40,  64,  34,  40,  402, 65,  156, 402, 66,  34,  40,  67,  31,
        40,  85,  402, 51,  156, 53,  24,  153, 182, 57,  114, 59,  19,  40,  60,  22,  40,  258, 62,  24,  40,  63,
        225, 64,  24,  40,  156, 65,  514, 67,  156, 549, 286, 53,  30,  153, 156, 57,  24,  40,  328, 60,  156, 61,
        392, 62,  310, 63,  225, 64,  111, 310, 65,  15,  40,  13,  40,  66,  40,  67,  392, 85,  310, 51,  13,  40,
        53,  16,  153, 225, 57,  372, 225, 61,  392, 62,  17,  40,  63,  225, 64,  120, 173, 65,  111, 120, 66,  402,
        67,  120, 85,  145, 51,  111, 53,  30,  153, 286, 57,  402, 59,  35,  40,  60,  506, 61,  182, 62,  111, 63,
        182, 64,  506, 402, 65,  37,  40,  402, 66,  506, 67,  120, 85,  22,  40,  51,  111, 53,  30,  153, 34,  40,
        57,  37,  40,  59,  40,  60,  40,  61,  37,  40,  62,  40,  63,  35,  40,  64,  182, 173, 65,  120, 286, 66,
        402, 67,  182, 85,  506, 51,  402, 53,  35,  153, 40,  57,  37,  40,  59,  35,  40,  60,  506, 61,  35,  40,
        62,  286, 63,  37,  40,  64,  286, 182, 65,  111, 286, 66,  40,  67,  31,  40,  85,  182, 51,  111, 53,  26,
        153, 182, 57,  24,  40,  59,  111, 60,  17,  40,  61,  392, 62,  40,  63,  392, 64,  111, 286, 65,  402, 182,
        66,  111, 67,  506, 85,  392, 51,  145, 325, 182, 57,  372, 392, 538, 62,  15,  40,  63,  120, 64,  182, 145,
        65,  225, 35,  40,  66,  392, 67,  286, 85,  310, 51,  286, 53,  32,  153, 182, 57,  114, 534, 60,  36,  40,
        61,  37,  40,  62,  182, 63,  156, 64,  24,  40,  156, 65,  310, 402, 66,  15,  40,  67,  182, 85,  13,  40,
        51,  182, 53,  114, 55,  156, 57,  266, 114, 60,  402, 539, 62,  173, 63,  120, 64,  225, 120, 65,  310, 225,
        66,  120, 67,  173, 85,  402, 51,  111, 53,  17,  153, 225, 57,  266, 506, 60,  402, 61,  35,  40,  62,  286,
        63,  182, 64,  111, 114, 65,  173, 182, 66,  286, 67,  111, 85,  24,  40,  51,  286, 53,  32,  153, 392, 57,
        310, 59,  37,  40,  60,  36,  40,  61,  37,  40,  62,  31,  40,  63,  402, 64,  24,  40,  111, 65,  225, 114,
        66,  156, 67,  24,  40,  85,  111, 51,  13,  40,  53,  16,  153, 225, 57,  266, 114, 60,  402, 61,  36,  40,
        62,  37,  40,  63,  402, 64,  114, 111, 65,  13,  43,  67,  156, 549, 286, 53,  30,  153, 156, 57,  24,  40,
        328, 60,  156, 61,  392, 62,  310, 63,  225, 64,  111, 310, 65,  15,  40,  13,  40,  66,  40,  67,  392, 85,
        310, 51,  13,  40,  53,  16,  153, 225, 57,  372, 225, 61,  392, 62,  17,  40,  63,  225, 64,  120, 173, 65,
        111, 120, 66,  402, 67,  120, 85,  145, 51,  111, 53,  30,  153, 286, 57,  402, 59,  35,  40,  60,  506, 61,
        182, 62,  111, 63,  182, 64,  506, 402, 65,  37,  40,  402, 66,  506, 67,  120, 85,  22,  40,  51,  111, 53,
        30,  153, 34,  40,  57,  37,  40,  59,  40,  60,  40,  61,  37,  40,  62,  40,  63,  35,  40,  64,  182, 173,
        65,  120, 286, 66,  402, 67,  182, 85,  506, 51,  402, 53,  35,  153, 40,  57,  37,  40,  59,  35,  40,  60,
        506, 61,  35,  40,  62,  286, 63,  37,  40,  64,  286, 182, 65,  111, 286, 66,  40,  67,  31,  40,  85,  182,
        51,  111, 53,  26,  153, 182, 57,  24,  40,  59,  111, 60,  17,  40,  61,  392, 62,  40,  63,  392, 64,  111,
        286, 65,  402, 182, 66,  111, 67,  506, 85,  392, 51,  145, 325, 182, 57,  372, 392, 538, 62,  15,  40,  63,
        120, 64,  182, 145, 65,  225, 35,  40,  66,  392, 67,  286, 85,  310, 51,  286, 53,  32,  153, 182, 57,  114,
        534, 60,  36,  40,  61,  37,  40,  62,  182, 63,  156, 64,  24,  40,  156, 65,  310, 402, 66,  15,  40,  67,
        182, 85,  13,  40,  51,  182, 53,  114, 55,  156, 57,  266, 114, 60,  402, 539, 62,  173, 63,  120, 64,  225,
        120, 65,  310, 225, 66,  120, 67,  173, 85,  402, 51,  111, 53,  17,  153, 225, 57,  266, 506, 60,  402, 61,
        35,  40,  62,  286, 63,  182, 64,  111, 114, 65,  173, 182, 66,  286, 67,  111, 85,  24,  40,  51,  286, 53,
        32,  153, 392, 57,  310, 59,  37,  40,  60,  36,  40,  61,  37,  40,  62,  31,  40,  63,  402, 64,  24,  40,
        111, 65,  225, 114, 66,  156, 67,  24,  40,  85,  111, 51,  13,  40,  53,  16,  153, 225, 57,  266, 114, 60,
        402, 61,  36,  40,  62,  37,  40,  63,  402, 64,  114, 111, 65,  13,  43]

def main():
    tokenizer = REMI(params=Path("experiments/example_tokenizer.json"))
    print(len(tokenizer._vocab_base_id_to_byte))
    tokens_real = tokenizer(Path("experiments/violin.mid"))  # automatically detects Score objects, paths, tokens

    tokseq_fake = TokSequence()
    tokseq_fake.ids = decoded_ids
    tokseq_fake._ticks_bars = ticks_bars
    tokseq_fake._ticks_beats = ticks_beats
    tokseq_fake.are_ids_encoded = False

    # straight from midi
    encoded_ids_real = deepcopy(tokens_real[0].ids)
    print("\nEncoded tokens from tokenizer(midi_path)\n")
    for id in encoded_ids_real:
        print(id)

    # from intermediate step
    tokenizer.encode_token_ids(tokseq_fake)
    encoded_ids_fake = tokseq_fake.ids
    print("\nEncoded crafted tokseq using encode_token_ids(tokseq)\n")
    for id in encoded_ids_fake:
        print(id)

    print("\n")
    print(encoded_ids_real == encoded_ids_fake) # False




if __name__ == "__main__":
    main()
